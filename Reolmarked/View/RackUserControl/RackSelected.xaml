<UserControl x:Class="Reolmarked.View.RackUserControl.RackSelected"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:helpers="clr-namespace:Reolmarked.ViewModel.Helpers">

    <UserControl.Resources>
        <!-- Converters fra Reolmarked.ViewModel.Helpers -->
        <helpers:BoolToTextConverter x:Key="BoolToText" TrueText="Optaget" FalseText="Ledig"/>
        <helpers:BoolNotConverter x:Key="BoolNot"/>
        <helpers:NullToVisibilityConverter x:Key="NullToVisibilityConverter"/>

        <!-- Styles til kompakt sidebar (passer i smal kolonne) -->
        <Style x:Key="Pill" TargetType="Border">
            <Setter Property="CornerRadius" Value="16"/>
            <Setter Property="Background" Value="#FFFFFF"/>
            <Setter Property="BorderBrush" Value="#E0E0E0"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="8,6"/>
        </Style>

        <Style x:Key="BigTitle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="22"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="TextTrimming" Value="CharacterEllipsis"/>
        </Style>

        <Style x:Key="Label" TargetType="TextBlock">
            <Setter Property="Foreground" Value="#616161"/>
            <Setter Property="Margin" Value="0,8,0,4"/>
            <Setter Property="FontSize" Value="12"/>
        </Style>

        <Style x:Key="PrimaryBtn" TargetType="Button">
            <Setter Property="Height" Value="36"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Background" Value="#F5F5F5"/>
            <Setter Property="BorderBrush" Value="#E0E0E0"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Foreground" Value="#444"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border CornerRadius="18"
                    Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}">
                            <ContentPresenter HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Margin="6,0"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="DangerBtn" BasedOn="{StaticResource PrimaryBtn}" TargetType="Button">
            <Setter Property="Background" Value="#FFE9E9"/>
            <Setter Property="BorderBrush" Value="#FFBDBD"/>
            <Setter Property="Foreground" Value="#C62828"/>
        </Style>
    </UserControl.Resources>

    <!-- Selve sidebjælken -->
    <Border CornerRadius="24"
          Background="#FFFFFF"
          BorderBrush="#E0E0E0"
          BorderThickness="1"
          Padding="16">
        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <StackPanel>

                <!-- Titel -->
                <TextBlock Style="{StaticResource BigTitle}"
                   Text="{Binding Rack.RackId, StringFormat=Reol {0}}"/>

                <!-- Status -->
                <TextBlock Style="{StaticResource Label}" Text="Status"/>
                <Border Style="{StaticResource Pill}">
                    <TextBlock Text="{Binding IsOccupied, Converter={StaticResource BoolToText}}"
                     FontWeight="SemiBold"
                     HorizontalAlignment="Center"/>
                </Border>

                <!-- Lejer -->
                <TextBlock Style="{StaticResource Label}" Text="Lejer"/>
                <Border Style="{StaticResource Pill}">
                    <TextBlock Text="{Binding RenterName}"
                     FontWeight="SemiBold"
                     TextTrimming="CharacterEllipsis"/>
                </Border>

                <!-- Periode -->
                <TextBlock Style="{StaticResource Label}" Text="Periode"/>
                <Border Style="{StaticResource Pill}">
                    <TextBlock Text="{Binding PeriodText}" FontWeight="SemiBold"/>
                </Border>

                <!-- Dage tilbage (vises kun hvis der er en slutdato) -->
                <TextBlock Style="{StaticResource Label}" Text="Dage tilbage"
                   Visibility="{Binding DaysLeft, Converter={StaticResource NullToVisibilityConverter}}"/>
                <Border Style="{StaticResource Pill}"
                Visibility="{Binding DaysLeft, Converter={StaticResource NullToVisibilityConverter}}">
                    <TextBlock Text="{Binding DaysLeft}" FontWeight="SemiBold"/>
                </Border>

                <!-- Knapper -->
                <Border Height="12" Background="Transparent"/>

                <Button Style="{StaticResource PrimaryBtn}"
                Content="Opret lejekontrakt"
                IsEnabled="{Binding IsOccupied, Converter={StaticResource BoolNot}}"/>

                <Border Height="6" Background="Transparent"/>

                <Button Style="{StaticResource PrimaryBtn}"
                Content="Ændre lejekontrakt"
                IsEnabled="{Binding IsOccupied}"/>

                <Border Height="6" Background="Transparent"/>

                <Button Style="{StaticResource DangerBtn}"
                Content="Opsig lejekontrakt"
                IsEnabled="{Binding IsOccupied}"/>

            </StackPanel>
        </ScrollViewer>
    </Border>
</UserControl>
